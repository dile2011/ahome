//
//  AHomeMergeCell.m
//  ahome
//
//  Created by andson-dile on 15/6/17.
//  Copyright (c) 2015å¹´ ushome. All rights reserved.
//

#import "AHomeMergeCell.h"
#import "AMergeHomeInfo.h"

@implementation AHomeMergeCell

- (instancetype)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    
    for (int i=1; i<=5; i++) {
        if (i == 1) continue;
        
        CAShapeLayer *circleLayer = [CAShapeLayer layer];
        [circleLayer setBounds:CGRectMake(0, 0, i*2*[AHomeMergeCell radiusSize],i*2*[AHomeMergeCell radiusSize])];
        [circleLayer setPosition:CGPointMake([UIScreen mainScreen].bounds.size.width/2., [AHomeMergeCell heightForCell:1]/2.)];
        [circleLayer setFillColor:[[UIColor clearColor] CGColor]];
        
        UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(0.0f, 0.0f, i*2*[AHomeMergeCell radiusSize], i*2*[AHomeMergeCell radiusSize])];
        [circleLayer setPath:[path CGPath]];
        [circleLayer setStrokeColor:[[UIColor whiteColor]CGColor]];
        [circleLayer setLineWidth:.1f/i];
        [[self layer] addSublayer:circleLayer];
    }

    _mergeHomeMembers = [NSMutableArray array];
    for (int i=0; i<20; i++) {
        AMergeMemberView *mergeMemberView = [[AMergeMemberView alloc]init];
        [_mergeHomeMembers addObject:mergeMemberView];
    }
    
    return self;
}

- (void)setDataForCell:(ARecord*)record {
    AMergeHomeInfo *mergeHomeInfo = (AMergeHomeInfo*)record;
    
    for (int i = (int)mergeHomeInfo.members.count-1; i>=0; i--) {
        AMergeHomeMember *mergeMember = [mergeHomeInfo.members objectAtIndex:i];
        AMergeMemberView *mergeHomeView = [_mergeHomeMembers objectAtIndex:i];
        [mergeHomeView setData:mergeMember];
        [self addSubview:mergeHomeView];
    }
}


+ (float)heightForCell:(int)nodes {
    return [UIScreen mainScreen].bounds.size.height-64;
}

+ (float)radiusSize {
    return 50.f;
}

@end
