//
//  AHomeMember.m
//  ahome
//
//  Created by dilei liu on 15/1/26.
//  Copyright (c) 2015年 ushome. All rights reserved.
//

#import "AHomeMember.h"

@implementation AHomeMember


- (void)updateWithJSonDictionary:(NSDictionary *)dic {
    self.uid = (long)[[dic objectForKey:@"uid"]longLongValue];
    
    self.avatar = [dic objectForKey:@"avatar"];
    self.phone = [dic objectForKey:@"phone"];
    self.part = [dic objectForKey:@"part"];
    
    self.flag = [[dic objectForKey:@"flag"]intValue];
    self.uname = [dic objectForKey:@"uname"];
    
    if ([self.part isEqualToString:@"家父"]) {
        self.placeHolderImage = @"home_member_father.png";
    } else if ([self.part isEqualToString:@"家母"]) {
        self.placeHolderImage = @"home_member_mother.png";
    } else if ([self.part isEqualToString:@"家子"]) {
        self.placeHolderImage = @"home_member_sun.png";
    } else if ([self.part isEqualToString:@"家女"]) {
        self.placeHolderImage = @"home_member_girl.png";
    }
    
    
    if (self.uid == 0) { // 未邀请
        NSString *phone = [self.phone stringByReplacingOccurrencesOfString:@"-" withString:@""];
        if ([phone isMatchedByRegex:PhoneRegex]==NO) {
            self.memberState = StateAuth;
        }
        else self.memberState = StateInvite;
        
    } else { //StateOther
        self.memberState = StateSelf;
    }
}


@end
