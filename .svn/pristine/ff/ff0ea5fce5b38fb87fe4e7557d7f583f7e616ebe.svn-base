//
//  AMenuMrSelfView.m
//  demoe
//
//  Created by andson-dile on 15/3/19.
//  Copyright (c) 2015年 andson. All rights reserved.
//

#import "AMenuMrSelfView.h"
#import "UIImageView+WebCache.h"

#define margin_bottom_size      30
#define attri_content_size      70
#define busytime_content_size   40

#define margin_left_size        5

@implementation AMenuMrSelfView

- (CGSize)getViewSize {
    return CGSizeMake(200, 220);
}

- (void)drawTitleView {
    [super drawTitleView];
    [self titleViewWithTitle:[NSString stringWithFormat:@"%@ (我)",_member.uname] titleView:self.titleView];
}


- (void)drawPanelView {
    UIView *attrView = [[UIView alloc]initWithFrame:CGRectMake(0, self.titleView.frame.size.height+5, self.frame.size.width, attri_content_size)];
    attrView.tag = 11;
    [self addSubview:attrView];
    
    UIView *busytimeView = [[UIView alloc]initWithFrame:CGRectMake(0, attrView.frame.size.height+attrView.frame.origin.y+7, self.frame.size.width, busytime_content_size)];
    busytimeView.tag = 22;
    [self addSubview:busytimeView];
    
    UIView *dynamicView = [[UIView alloc]initWithFrame:CGRectMake(0, busytimeView.frame.size.height+busytimeView.frame.origin.y+7, self.frame.size.width, self.frame.size.height-busytimeView.frame.size.height-busytimeView.frame.origin.y-margin_bottom_size)];
    dynamicView.tag = 33;
    [self addSubview:dynamicView];
    
    [self contentByAttribute];
    [self contentByBusytime];
    [self contentByDynamic];
    [self honorByFamily];
}

- (void)contentByAttribute {
    UIView *attrView = [self viewWithTag:11];
    
    UIImageView *avatarView = [[UIImageView alloc]init];
    [avatarView setImageWithURL:[NSURL URLWithString:_member.avatar]];
    [avatarView setFrame:CGRectMake(attrView.frame.size.width-margin_left_size-70, 0, 70, attrView.frame.size.height)];
    avatarView.layer.cornerRadius = 4;
    avatarView.layer.masksToBounds = YES;
    avatarView.contentMode = UIViewContentModeScaleAspectFit;
    [attrView addSubview:avatarView];
    
    //
    UILabel *brithTitleLabel = [[UILabel alloc]init];
    [brithTitleLabel setBackgroundColor:[UIColor clearColor]];
    [brithTitleLabel setText:@"出生日"];
    [brithTitleLabel setFont:[UIFont boldSystemFontOfSize:12]];
    [brithTitleLabel setTextColor:[UIColor whiteColor]];
    brithTitleLabel.lineBreakMode = NSLineBreakByWordWrapping;
    brithTitleLabel.numberOfLines = 1;
    CGSize titleSize = CGSizeMake(self.frame.size.width, 20000.0f);
    NSDictionary * tdic = [NSDictionary dictionaryWithObjectsAndKeys:brithTitleLabel.font, NSFontAttributeName,nil];
    titleSize =[brithTitleLabel.text boundingRectWithSize:titleSize options:NSStringDrawingUsesLineFragmentOrigin |NSStringDrawingUsesFontLeading attributes:tdic context:nil].size;
    [brithTitleLabel setFrame:CGRectMake(2*margin_left_size, 0, titleSize.width, titleSize.height)];
    [attrView addSubview:brithTitleLabel];
    
    UILabel *brithLabel = [[UILabel alloc]init];
    [brithLabel setBackgroundColor:[UIColor clearColor]];
    [brithLabel setText:@"1986/10/18"];
    [brithLabel setFont:[UIFont fontWithName:@"Heiti SC" size:12]];
    [brithLabel setTextColor:[UIColor whiteColor]];
    brithLabel.lineBreakMode = NSLineBreakByWordWrapping;
    brithLabel.numberOfLines = 1;
    titleSize = CGSizeMake(self.frame.size.width, 20000.0f);
    tdic = [NSDictionary dictionaryWithObjectsAndKeys:brithLabel.font, NSFontAttributeName,nil];
    titleSize =[brithLabel.text boundingRectWithSize:titleSize options:NSStringDrawingUsesLineFragmentOrigin |NSStringDrawingUsesFontLeading attributes:tdic context:nil].size;
    [brithLabel setFrame:CGRectMake(margin_left_size, brithTitleLabel.frame.origin.y+brithTitleLabel.frame.size.height, titleSize.width, titleSize.height)];
    [attrView addSubview:brithLabel];
    
    //
    UILabel *goodTitleLabel = [[UILabel alloc]init];
    [goodTitleLabel setBackgroundColor:[UIColor clearColor]];
    [goodTitleLabel setText:@"擅长"];
    [goodTitleLabel setFont:[UIFont boldSystemFontOfSize:12]];
    [goodTitleLabel setTextColor:[UIColor whiteColor]];
    goodTitleLabel.lineBreakMode = NSLineBreakByWordWrapping;
    goodTitleLabel.numberOfLines = 1;
    titleSize = CGSizeMake(self.frame.size.width, 20000.0f);
    tdic = [NSDictionary dictionaryWithObjectsAndKeys:goodTitleLabel.font, NSFontAttributeName,nil];
    titleSize =[goodTitleLabel.text boundingRectWithSize:titleSize options:NSStringDrawingUsesLineFragmentOrigin |NSStringDrawingUsesFontLeading attributes:tdic context:nil].size;
    [goodTitleLabel setFrame:CGRectMake(2*margin_left_size, brithLabel.frame.origin.y+brithLabel.frame.size.height+5, titleSize.width, titleSize.height)];
    [attrView addSubview:goodTitleLabel];
    
    UILabel *goodLabel = [[UILabel alloc]init];
    [goodLabel setBackgroundColor:[UIColor clearColor]];
    [goodLabel setText:@"打猎、土木建筑"];
    [goodLabel setFont:[UIFont fontWithName:@"Heiti SC" size:12]];
    [goodLabel setTextColor:[UIColor whiteColor]];
    goodLabel.lineBreakMode = NSLineBreakByWordWrapping;
    goodLabel.numberOfLines = 1;
    titleSize = CGSizeMake(self.frame.size.width, 20000.0f);
    tdic = [NSDictionary dictionaryWithObjectsAndKeys:goodLabel.font, NSFontAttributeName,nil];
    titleSize =[goodLabel.text boundingRectWithSize:titleSize options:NSStringDrawingUsesLineFragmentOrigin |NSStringDrawingUsesFontLeading attributes:tdic context:nil].size;
    [goodLabel setFrame:CGRectMake(margin_left_size, goodTitleLabel.frame.origin.y+goodTitleLabel.frame.size.height, titleSize.width, titleSize.height)];
    [attrView addSubview:goodLabel];
}

- (void)contentByBusytime {
    UIView *busyView = [self viewWithTag:22];
    
    //
    UILabel *busytimeTitleLabel = [[UILabel alloc]init];
    [busytimeTitleLabel setBackgroundColor:[UIColor clearColor]];
    [busytimeTitleLabel setText:@"最近相关"];
    [busytimeTitleLabel setFont:[UIFont boldSystemFontOfSize:12]];
    [busytimeTitleLabel setTextColor:[UIColor whiteColor]];
    busytimeTitleLabel.lineBreakMode = NSLineBreakByWordWrapping;
    busytimeTitleLabel.numberOfLines = 1;
    CGSize titleSize = CGSizeMake(self.frame.size.width, 20000.0f);
    NSDictionary *tdic = [NSDictionary dictionaryWithObjectsAndKeys:busytimeTitleLabel.font, NSFontAttributeName,nil];
    titleSize =[busytimeTitleLabel.text boundingRectWithSize:titleSize options:NSStringDrawingUsesLineFragmentOrigin |NSStringDrawingUsesFontLeading attributes:tdic context:nil].size;
    [busytimeTitleLabel setFrame:CGRectMake(2*margin_left_size, 0, titleSize.width, titleSize.height)];
    [busyView addSubview:busytimeTitleLabel];
    
    UIView *busytimeView = [[UIView alloc]initWithFrame:CGRectMake(0, busytimeTitleLabel.frame.origin.y+busytimeTitleLabel.frame.size.height, busyView.frame.size.width, busyView.frame.size.height-busytimeTitleLabel.frame.size.height)];
    [busytimeView setBackgroundColor:[UIColor colorWithRed:24./255 green:24./255 blue:24./255 alpha:1.]];
    [busyView addSubview:busytimeView];
    
    UILabel *busytimeLabel = [[UILabel alloc]init];
    [busytimeLabel setBackgroundColor:[UIColor clearColor]];
    [busytimeLabel setText:@":-( 最近处于休眠状态"];
    [busytimeLabel setFont:[UIFont fontWithName:@"Heiti SC" size:12]];
    [busytimeLabel setTextColor:[UIColor whiteColor]];
    busytimeLabel.lineBreakMode = NSLineBreakByWordWrapping;
    busytimeLabel.numberOfLines = 1;
    titleSize = CGSizeMake(self.frame.size.width, 20000.0f);
    tdic = [NSDictionary dictionaryWithObjectsAndKeys:busytimeLabel.font, NSFontAttributeName,nil];
    titleSize =[busytimeLabel.text boundingRectWithSize:titleSize options:NSStringDrawingUsesLineFragmentOrigin |NSStringDrawingUsesFontLeading attributes:tdic context:nil].size;
    [busytimeLabel setFrame:CGRectMake(margin_left_size, 0, busytimeView.frame.size.width-2*margin_left_size, busytimeView.frame.size.height)];
    busytimeLabel.textAlignment = NSTextAlignmentLeft;
    [busytimeView addSubview:busytimeLabel];
}

- (void)contentByDynamic {
    UIView *dynamicView = [self viewWithTag:33];
    
    //
    UILabel *dynamicTitleLabel = [[UILabel alloc]init];
    [dynamicTitleLabel setBackgroundColor:[UIColor clearColor]];
    [dynamicTitleLabel setText:@"今日动态"];
    [dynamicTitleLabel setFont:[UIFont boldSystemFontOfSize:12]];
    [dynamicTitleLabel setTextColor:[UIColor whiteColor]];
    dynamicTitleLabel.lineBreakMode = NSLineBreakByWordWrapping;
    dynamicTitleLabel.numberOfLines = 1;
    CGSize titleSize = CGSizeMake(self.frame.size.width, 20000.0f);
    NSDictionary *tdic = [NSDictionary dictionaryWithObjectsAndKeys:dynamicTitleLabel.font, NSFontAttributeName,nil];
    titleSize =[dynamicTitleLabel.text boundingRectWithSize:titleSize options:NSStringDrawingUsesLineFragmentOrigin |NSStringDrawingUsesFontLeading attributes:tdic context:nil].size;
    [dynamicTitleLabel setFrame:CGRectMake(2*margin_left_size, 0, titleSize.width, titleSize.height)];
    [dynamicView addSubview:dynamicTitleLabel];
    
    UIView *dynamicBtnsView = [[UIView alloc]initWithFrame:CGRectMake(0, dynamicTitleLabel.frame.origin.y+dynamicTitleLabel.frame.size.height, dynamicView.frame.size.width, dynamicView.frame.size.height-dynamicTitleLabel.frame.size.height)];
    [dynamicBtnsView setBackgroundColor:[UIColor colorWithRed:24./255 green:24./255 blue:24./255 alpha:1.]];
    [dynamicView addSubview:dynamicBtnsView];
}

- (void)honorByFamily {
    
    UIView *honorView = [[UIView alloc]initWithFrame:CGRectMake(0, self.frame.size.height-margin_bottom_size, self.frame.size.width, margin_bottom_size)];
    [self addSubview:honorView];
    
    //
    UILabel *honorTitleLabel = [[UILabel alloc]init];
    [honorTitleLabel setBackgroundColor:[UIColor clearColor]];
    [honorTitleLabel setText:@"家族荣誉"];
    [honorTitleLabel setFont:[UIFont boldSystemFontOfSize:12]];
    [honorTitleLabel setTextColor:[UIColor whiteColor]];
    honorTitleLabel.lineBreakMode = NSLineBreakByWordWrapping;
    honorTitleLabel.numberOfLines = 1;
    CGSize titleSize = CGSizeMake(self.frame.size.width, 20000.0f);
    NSDictionary *tdic = [NSDictionary dictionaryWithObjectsAndKeys:honorTitleLabel.font, NSFontAttributeName,nil];
    titleSize =[honorTitleLabel.text boundingRectWithSize:titleSize options:NSStringDrawingUsesLineFragmentOrigin |NSStringDrawingUsesFontLeading attributes:tdic context:nil].size;
    [honorTitleLabel setFrame:CGRectMake(2*margin_left_size, (honorView.frame.size.height-titleSize.height)/2., titleSize.width, titleSize.height)];
    [honorView addSubview:honorTitleLabel];
}

@end
