//
//  ABaseHomeController.m
//  demoe
//
//  Created by andson-dile on 15/3/11.
//  Copyright (c) 2015å¹´ andson. All rights reserved.
//

#import "ABaseHomeController.h"
#import "ParallaxHeaderView.h"
#import "AHomePageToolView.h"

#define tool_size_height    45

@implementation ABaseHomeController

- (void)viewDidLoad {
    [self.view setFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height)];
    _kenBurnsView = [[JSAnimatedImagesView alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    _kenBurnsView.delegate = self;
    self.view = _kenBurnsView;
    [self.view addSubview:[self blurView]];
    
    [super viewDidLoad];
    
    self.headerView = [ParallaxHeaderView parallaxHeaderViewWithCGSize:CGSizeMake(self.tableView.frame.size.width, 200)];
    [self.tableView setTableHeaderView:_headerView];
    
    AHomePageToolView *homePageToolView = [[AHomePageToolView alloc]initWithFrame:CGRectMake(0, _headerView.frame.size.height-tool_size_height, _headerView.frame.size.width, tool_size_height)];
    homePageToolView.tag = 100;
    [_headerView addSubview:homePageToolView];
}

- (UIView*)blurView {
    UIVisualEffectView *visualEffectView = nil;
    CGRect blurBounds = CGRectMake(0, 0, 0, 0);
    
    blurBounds = CGRectMake(0, -1000, self.view.frame.size.width, self.view.frame.size.height+2000);
    
    UIVisualEffect *blurEffect;
    blurEffect = [UIBlurEffect effectWithStyle:UIBlurEffectStyleLight];
    visualEffectView = [[UIVisualEffectView alloc] initWithEffect:blurEffect];
    visualEffectView.frame = blurBounds;
    
    return visualEffectView;
}

- (NSUInteger)animatedImagesNumberOfImages:(JSAnimatedImagesView *)animatedImagesView {
    return 3;
}

- (UIImage *)animatedImagesView:(JSAnimatedImagesView *)animatedImagesView imageAtIndex:(NSUInteger)index {
    return [UIImage imageNamed:[NSString stringWithFormat:@"guide_background2.jpg"]];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 10.;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"cell";
    UITableViewCell *cell = (UITableViewCell*)[tableView  dequeueReusableCellWithIdentifier:CellIdentifier];
    
    if (cell == nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        [cell setBackgroundColor:[UIColor clearColor]];
    }
    
    return cell;
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [_kenBurnsView startAnimating];
    
}

- (void)viewDidDisappear:(BOOL)animated {
    [super viewDidDisappear:animated];
    //[_kenBurnsView stopAnimating];
}




@end
